<script>document.addEventListener('DOMContentLoaded', function () {(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{2466:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r=n(2640),i=n(7948),s=n(2287),a=n(7294),l=n(4054),c=n(3841),o=n(5819),u=n(8378),d=n(135),f=n(480),x=n(6815),p=n(2890),v=n(7781),h=n(6242),g=n(4267),j=n(5861),m=n(7357),Z=n(5893);function b(e){var t=e.step,n=e.title,r=e.cardContent;return(0,Z.jsx)(h.Z,{sx:{my:3,py:1,px:1},className:"c1djb222",children:(0,Z.jsxs)(g.Z,{children:[(0,Z.jsxs)(j.Z,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:["STEP ",t]}),(0,Z.jsx)(j.Z,{variant:"h5",component:"div",children:n}),(0,Z.jsx)(m.Z,{sx:{mx:1,my:2},children:r})]})})}var y=n(6886);function _(e){var t=e.choiceList,n=e.question,r=e.tmpLimitData,i=e.updateTempLimitData,s=function(e){var t=e.target.id.replace("choice_",""),s=l(e);e.target.value=s;var a=r;if(a[n.id])a[n.id][t]=parseInt(s);else{var c={};c[t]=parseInt(s),a[n.id]=c}i(a)},l=function(e){var t=parseInt(e.target.value);return t<1?"1":/\./.test(e.target.value)?Math.floor(t).toString():e.target.value};return(0,Z.jsxs)("div",{children:[(0,Z.jsxs)(x.Z,{children:["1\u4ee5\u4e0a\u306e\u6574\u6570\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",(0,Z.jsx)("br",{}),"\u5b9a\u54e1\u3092\u7121\u5236\u9650\u306b\u3059\u308b\u5834\u5408\u306f\u3001\u7a7a\u6b04\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),(0,Z.jsx)(y.ZP,{container:!0,spacing:2,mt:2,children:t.map((function(e){var t=function(e){var t=e.indexOf("\u3164(\u5168"),n=e.indexOf("\u67a0\u7a7a\u304d)");if(-1===t||-1===n)return e;var r=t+"\u3164(\u5168".length,i=n;return e.substr(r,i-r)}(e.toString());return(0,Z.jsxs)(a.Fragment,{children:[(0,Z.jsx)(y.ZP,{item:!0,sm:6,xs:12,children:(0,Z.jsx)("p",{children:t})}),(0,Z.jsx)(y.ZP,{item:!0,sm:6,xs:12,children:(0,Z.jsx)(d.Z,{id:"choice_"+t,label:"\u5b9a\u54e1",variant:"filled",type:"number",size:"small",defaultValue:r[n.id]?r[n.id][t]:"",onBlur:s})})]},t)}))})]})}var S=n(3321),w=n(55),C=n(6798);function I(e){var t=e.open,n=e.setOpen,r=e.message;return(0,Z.jsx)(C.Z,{open:t,onClose:function(e,t){"clickaway"!==t&&n(!1)},message:r})}var k=function(){var e={id:0,title:"\u30d5\u30a9\u30fc\u30e0\u5168\u4f53",type:"none",choices:["\u30d5\u30a9\u30fc\u30e0\u5168\u4f53"]},t=a.useState(e),n=(0,r.Z)(t,2),h=n[0],g=n[1],j=a.useState([e]),y=(0,r.Z)(j,2),C=y[0],k=y[1],E=a.useRef(),O=a.useState({}),D=(0,r.Z)(O,2),L=D[0],N=D[1],P=a.useState("always"),q=(0,r.Z)(P,2),T=q[0],B=q[1],H=a.useRef(),R=a.useRef(),z=a.useState(!1),M=(0,r.Z)(z,2),V=M[0],X=M[1],A=a.useState(!1),F=(0,r.Z)(A,2),Q=F[0],W=F[1],G=function(t){var n=C.concat(t.items.filter((function(e){return e.choices.length>0}))||[]);k(n),E.current&&g(n.find((function(e){return e.id===E.current}))||e),W(!1)},J=function(t){var n=C.find((function(e){return e.id===t.id}));n?g(n):(g(e),E.current=t.id);var r=t.display,i=t.display.split("_")[1];/^controlled/.test(t.display)&&!i&&(r="always"),B(r),/^controlled/.test(t.display)&&i&&(H.current=parseInt(i));var s={};s[t.id]=t.limit,N(s)};return a.useEffect((function(){W(!0),google.script.run.withSuccessHandler(G).getQuestions(),google.script.run.withSuccessHandler(J).getSaveData()}),[]),(0,Z.jsxs)(i.Z,{maxWidth:"lg",children:[(0,Z.jsx)(s.Z,{styles:{body:{backgroundColor:"#f1f1f1"}}}),(0,Z.jsx)(b,{step:1,title:"\u5b9a\u54e1\u3092\u8a2d\u3051\u308b\u5bfe\u8c61\u3092\u9078\u629e",cardContent:(0,Z.jsxs)(l.Z,{variant:"filled",children:[(0,Z.jsx)(c.Z,{id:"question-label",children:"\u5bfe\u8c61"}),(0,Z.jsx)(u.Z,{labelId:"question-label",id:"select-question",value:h.id,onChange:function(t){g(C.find((function(e){return e.id===t.target.value}))||e)},children:C.map((function(e){return(0,Z.jsx)(o.Z,{value:e.id,children:e.title},e.id)}))}),(0,Z.jsxs)(x.Z,{children:["\u9078\u629e\u80a2\u3054\u3068\u306b\u5b9a\u54e1\u3092\u8a2d\u3051\u308b\u5834\u5408\u306f\u3001\u8a72\u5f53\u3059\u308b\u8a2d\u554f\u3092\u9078\u629e\u3057\u307e\u3059\u3002",(0,Z.jsx)("br",{}),"\u30d5\u30a9\u30fc\u30e0\u5168\u4f53\u306e\u56de\u7b54\u6570\u3092\u5236\u9650\u3059\u308b\u5834\u5408\u306f\u3001\u300c\u30d5\u30a9\u30fc\u30e0\u5168\u4f53\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002"]})]})}),(0,Z.jsx)(b,{step:2,title:"\u5b9a\u54e1\u3092\u8a2d\u5b9a",cardContent:(0,Z.jsx)(_,{choiceList:h.choices,question:h,tmpLimitData:L,updateTempLimitData:N})}),(0,Z.jsx)(b,{step:3,title:"\u6b8b\u308a\u67a0\u6570\u306e\u8868\u793a\u6761\u4ef6\u3092\u8a2d\u5b9a",cardContent:(0,Z.jsx)(l.Z,{children:(0,Z.jsxs)(p.Z,{value:T.split("_")[0],name:"conditions-for-displaying-the number",onChange:function(e){/^controlled/.test(e.target.value)&&H.current?B("controlled_"+H.current):B(e.target.value)},children:[(0,Z.jsx)(f.Z,{value:"always",control:(0,Z.jsx)(v.Z,{}),label:"\u5e38\u306b\u8868\u793a"}),(0,Z.jsx)(f.Z,{value:"controlled",control:(0,Z.jsx)(v.Z,{}),label:"\u4e00\u5b9a\u67a0\u6570\u4ee5\u4e0b\u306b\u306a\u3063\u305f\u3089\u8868\u793a"}),/^controlled/.test(T)?(0,Z.jsx)(d.Z,{id:"the-number",label:"\u3053\u306e\u67a0\u6570\u4ee5\u4e0b\u306b\u306a\u3063\u305f\u3089\u8868\u793a",variant:"filled",type:"number",defaultValue:H.current?H.current.toString():T.split("_")[1],onBlur:function(e){var t=parseInt(e.target.value);t<1&&(e.target.value="1"),/\./.test(e.target.value)&&(e.target.value=Math.floor(t).toString()),B("controlled_"+e.target.value),H.current=parseInt(e.target.value)}}):"",(0,Z.jsx)(f.Z,{value:"never",control:(0,Z.jsx)(v.Z,{}),label:"\u5e38\u306b\u975e\u8868\u793a"})]})})}),(0,Z.jsx)(m.Z,{sx:{pb:3,textAlign:"right"},children:(0,Z.jsx)(S.Z,{variant:"contained",startIcon:(0,Z.jsx)(w.Z,{}),onClick:function(){X(!0);var e=T;/^controlled/.test(T)&&!H&&(e="always"),R.current={id:h.id,display:e,limit:L[h.id]},google.script.run.withSuccessHandler((function(){google.script.host.close()})).saveData(R.current)},children:"\u9069\u7528"})}),(0,Z.jsx)(I,{open:Q,setOpen:W,message:"\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059\u2026"}),(0,Z.jsx)(I,{open:V,setOpen:X,message:"\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u2026"})]})}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2466)}])}},function(e){e.O(0,[981,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
});</script>
